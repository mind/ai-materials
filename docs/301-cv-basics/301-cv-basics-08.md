# rgb/bgr/lab/yuv/hsv/cmy及换算公式

## RGB

RGB颜色空间 RGB(red,green,blue)颜色空间最常用的用途就是显示器系统，彩色阴极射线管,彩色光栅图形的显示器 都使用R、G、B数值来驱动R、G、B 电子枪发射电子，并分别激发荧光屏上的R、G、B三种颜色的荧光粉 发出不同亮度的光线，并通过相加混合产生各种颜色；扫描仪也是通过吸收原稿经反射或透射而发送来 的光线中的R、G、B成分，并用它来表示原稿的颜色。RGB色彩空间称为与设备相关的色彩空间,因为不同 的扫描仪扫描同一幅图像，会得到不同色彩的图像数据；不同型号的显示器显示同一幅图像，也会有不同 的色彩显示结果。显示器和扫描仪使用的RGB空间与CIE 1931 RGB真实三原色表色系统空间是不同的，后者 是与设备无关的颜色空间。btw：Photoshop的色彩选取器(Color Picker)。可以显示HSB、RGB、LAB和CMYK 色彩空间的每一种颜色的色彩值。 

## BGR

BGR模式与RGB模式位置相反，从RGB到BGR转换方式为：

```
unsigned long dstValue = srcValue;
((unsigned char *)(&dstValue))[0] = ((unsigned char *)(&srcValue))[2];
((unsigned char *)(&dstValue))[2] = ((unsigned char *)(&srcValue))[0];
```

从BGR到RGB转换方式为：

```
unsigned long dstValue = srcValue;
((unsigned char *)(&dstValue))[0] = ((unsigned char *)(&srcValue))[2];
((unsigned char *)(&dstValue))[2] = ((unsigned char *)(&srcValue))[0];
```

## Lab

Lab颜色空间是由CIE(国际照明委员会)制定的一种色彩模式。自然界中任何一点色都可以在Lab空间中表达出来，它的色彩空间比RGB空间还要大。另外，这种模式是以数字化方式来描述人的视觉感应，与设备无关，所以它弥补了RGB和 CMYK模式必须依赖于设备色彩特性的不足。由于Lab的色彩空间要比RGB模式和CMYK模式的色彩空间大。这就意味着RGB以及CMYK所能描述的色彩信息在Lab空间中都能得以影射。Lab空间取坐标Lab，其中L亮度；a的正数代表红色，负端代表绿色；b的正数代表黄色， 负端代表兰色。

$$
\left[
 \begin{matrix}
  X  \\
   Y \\
  Z
  \end{matrix}
  \right] =\left[
 \begin{matrix}
   0.433910 & 0.376220 & 0.189860 \\
   0.212649 & 0.715169 & 0.072182 \\
   0.017756 & 0.109478 & 0.872915
  \end{matrix}
  \right] *\left[
 \begin{matrix}
  R/255  \\
  G/255 \\
 B/255
  \end{matrix}
  \right]
$$
$$
L = 116*Y   \\a = 500*(f(X)-f(Y))

\\b = 200*(f(Y)-f(Z))
$$

其中： 当t>0.008856时，$f(t)=t^{\frac{1}{3}}$

当t<=0.008856时，$f(t)=7.787*t+\frac{16}{116}$


## YUV

在现代彩色电视系统中，通常采用三管彩色摄像机或彩色CCD(点耦合器件)摄像机，它把摄得的彩色图像 信号，经分色、分别放大校正得到RGB，再经过矩阵变换电路得到亮度信号Y和两个色差信号R－Y、B－Y， 最后发送端将亮度和色差三个信号分别进行编码，用同一信道发送出去。这就是我们常用的YUV色彩空间。 采用YUV色彩空间的重要性是它的亮度信号Y和色度信号U、V是分离的。如果只有Y信号分量而没有U、V分量， 那么这样表示的图就是黑白灰度图。彩色电视采用YUV空间正是为了用亮度信号Y解决彩色电视机与黑白电视机 的兼容问题，使黑白电视机也能接收彩色信号。根据美国国家电视制式委员会，NTSC制式的标准，当白光的 亮度用Y来表示时，它和红、绿、蓝三色光的关系可用如下式的方程描述：$Y=0.3R+0.59G+0.11B$ 这就是常用 的亮度公式。色差U、V是由B－Y、R－Y按不同比例压缩而成的。如果要由YUV空间转化成RGB空间，只要进行 相反的逆运算即可。与YUV色彩空间类似的还有Lab色彩空间，它也是用亮度和色差来描述色彩分量，其中L为 亮度、a和b分别为各色差分量。 

RGB转换YUV公式：
```
Wr + Wg + Wb = 1; UMax = 0.5; VMax = 0.5`
Y  = Wr * R + Wg * G + Wb * B;`
Pb = Umax * (B - Y) / (1 - Wb);`
Pr = Vmax * (R - Y) / (1 - Wr);`
```

YUV转换RGB公式：
```
Wr + Wg + Wb = 1; Umax = Vmax = 0.5;
Y = 16 + 219 * (Wr * R  + Wg * G + Wb * B)   / 255;
Cb = 128 + 224 * (Umax * (B - Y) / (1 - Wb)) / 255;
Cr = 128 + 224 * (Vmax * (R - Y) / (1 - Wr)) / 255;
```
## HSV

HSV颜色空间 HSV(hue,saturation,value)颜色空间的模型对应于圆柱坐标系中的一个圆锥形子集，圆锥的顶面对应于V=1. 它包含RGB模型中的R=1，G=1，B=1 三个面，所代表的颜色较亮。色彩H由绕V轴的旋转角给定。红色对应于 角度0° ，绿色对应于角度180°，蓝色对应于角度270°。在HSV颜色模型中，每一种颜色和它的补色相差180° 。 饱和度S取值从0到1，所以圆锥顶面的半径为１。HSV颜色模型所代表的颜色域是CIE色度图的一个子集，这个 模型中饱和度为百分之百的颜色，其纯度一般小于百分之百。在圆锥的顶点(即原点)处，V=0,H和S无定义， 代表黑色。圆锥的顶面中心处S=0，V=1,H无定义，代表白色。从该点到原点代表亮度渐暗的灰色，即具有不同 灰度的灰色。对于这些点，S=0,H的值无定义。可以说，HSV模型中的V轴对应于RGB颜色空间中的主对角线。 在圆锥顶面的圆周上的颜色，V=1，S=1,这种颜色是纯色。HSV模型对应于画家配色的方法。画家用改变色浓和 色深的方法从某种纯色获得不同色调的颜色，在一种纯色中加入白色以改变色浓，加入黑色以改变色深，同时 加入不同比例的白色，黑色即可获得各种不同的色调。 

RGB到HSV转换公式为：
$$
max=max(R,G,B)  \\
min=min(R,G,B)  \\
if R = max, H = (G-B)/(max-min)\\  
if G = max, H = 2 + (B-R)/(max-min)\\  
if B = max, H = 4 + (R-G)/(max-min)  \\
H = H * 60  \\
if H < 0, H = H + 360\\  
V=max(R,G,B)  \\
S=(max-min)/max\\
$$
HSV到RGB转换公式为：
$$
if s = 0    \\
R=G=B=V  \\
else    \\
H /= 60;\\    
i = INTEGER(H)\\
f = H - i    \\
a = V * ( 1 - s )\\    
b = V * ( 1 - s * f )\\    
c = V * ( 1 - s * (1 - f ) )\\    
switch(i)      \\
case 0: R = V; G = c; B = a;\\      
case 1: R = b; G = v; B = a;   \\   
case 2: R = a; G = v; B = c;      \\
case 3: R = a; G = b; B = v;     \\ 
case 4: R = c; G = a; B = v;    \\  
case 5: R = v; G = a; B = b;
$$

## CMY

CMY是青（Cyan）、洋红或品红（Magenta）和黄（Yellow）三种颜色的简写，是相减混色模式，用这种方法产生的颜色之所以称为相减色，乃是因为它减少了为视觉系统识别颜色所需要的反射光。 CMY，我们的纸张是白底的，所以我们打印白色的时候应该是分量最轻的，也就是CMY最低，都是0。相反打印黑色是最大的！所以彩色打印一般用CMY标准！大多数将颜料沉淀于纸上的设备，如彩色打印机和复制机，都需要CMY数据输入，或在内部将RGB转化为CMY。转换公式为：
```
C=255-R
M=255-G [1] 
Y=255-B
```
该方程证明了从一个涂满纯净青色颜料的表面反射回的光不包含红色。同样，纯净的品红色不反射绿色，纯净的黄色不反射蓝色。前述的方程同样表明，从255减去单个CMY值，可以得到RGB值。